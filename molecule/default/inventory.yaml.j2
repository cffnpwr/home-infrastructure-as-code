all:
  children:
    controle_planes:
      hosts:
        {% for platform in molecule_yml.platforms | selectattr('groups', 'defined') | selectattr('groups', 'contains', 'controle_planes') | list -%}
        {{ platform.name }}:
          ansible_hosts: {{ platform.address }}
        {% endfor %}

    worker_nodes:
      hosts:
        {% for platform in molecule_yml.platforms | selectattr('groups', 'defined') | selectattr('groups', 'contains', 'worker_nodes') | list -%}
        {{ platform.name }}:
          ansible_hosts: {{ platform.address }}
        {% endfor %}

  vars:
    # Ansible
    ansible_user: ansible
    ansible_private_key_file: ./decrypted_key
    # K8s
    k8s_version: 1.31
    cri: containerd
    cni: cilium
    apiserver_endpoint: apiserver-endpoint
    vip: 10.255.255.100
    kube_vip_version: 0.8.3
